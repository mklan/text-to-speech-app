{"version":3,"sources":["index.ts"],"names":[],"mappings":";AAoEC,IAAA,EAAA,MAAA,KAAA,UAAA,WAAA,OAAA,EAAA,OAAA,QAAA,SAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,UAAA,OAAA,EAAA,EAAA,IAAA,IAAA,IAAA,KAAA,EAAA,UAAA,GAAA,OAAA,UAAA,eAAA,KAAA,EAAA,KAAA,EAAA,GAAA,EAAA,IAAA,OAAA,IAAA,MAAA,KAAA,YApEK,EAAQ,OAAO,gBAEf,EAAQ,SAAC,QAAA,IAAA,IAAA,EAAA,IACT,IAAA,EAAQ,EACL,MAAA,CACL,IAAK,SAAC,GAEG,OADP,EAAK,EAAA,EAAA,GAAQ,GAAU,IAGzB,IAAK,WAAW,OAAA,KA2BpB,SAAS,EAAM,EAAO,GACpB,QAAQ,IAAI,QAAS,CAAE,KAAI,EAAE,MAAK,IAClC,EAAM,SACA,IAAA,EAAY,IAAI,yBAAyB,GAC/C,EAAU,MAAQ,EAClB,EAAM,MAAM,GAGd,SAAS,EAAmB,GAAE,IAAA,EAAQ,EAAA,SAAE,EAAO,EAAA,QACvC,EAAS,EAAM,YACf,EAAU,EAAO,IAAI,SAAC,EAAO,GAAO,MAAA,CAAE,KAAM,EAAM,KAAM,MAAO,KAE/D,EAAW,SAAS,eAAe,UAEzC,EAAiB,EAAU,GAE3B,EAAS,SAAW,SAAC,GACnB,EAAS,EAAO,EAAE,OAAF,SAGd,GACF,EAAS,EAAO,IAIpB,SAAS,EAAiB,EAAU,GAClC,EAAQ,QAAQ,SAAC,GACT,IAAA,EAAW,SAAS,cAAc,UACxC,EAAS,MAAQ,EAAO,MACxB,EAAS,KAAO,EAAO,KACvB,EAAS,YAAY,MArDzB,WACQ,IAAA,EAAQ,IAER,EAAoB,SAAC,GACzB,QAAQ,IAAI,iBAAkB,GAC9B,EAAM,IAAI,CAAE,MAAK,KAcnB,SAAS,eAAe,aAAa,QAAU,WAAM,OAXtB,WACvB,IAAA,EAAS,SAAS,eAAe,QACnC,GAAC,EAAO,MAAR,CACI,IAAA,EAAU,EAAM,MAAK,MACxB,GACL,EAAM,EAAO,EAAO,QAM+B,IACrD,SAAS,eAAe,YAAY,QAAU,WAJ5C,EAAmB,CAAE,SAAU,EAAmB,QAAS,KAhB/D","file":"src.92e14b19.js","sourceRoot":"../src","sourcesContent":["const synth = window.speechSynthesis;\n\nconst State = (initalState = {}) => {\n  let state = initalState;\n  return {\n    set: (update) => {\n      state = { ...state, ...update };\n      return state;\n    },\n    get: (): any => state,\n  };\n};\n\n(() => {\n  const state = State();\n\n  const handleVoiceSelect = (voice) => {\n    console.log(\"voice selected\", voice);\n    state.set({ voice });\n  };\n\n  const handleSpeakButtonClick = () => {\n    const textEl = document.getElementById(\"text\") as any;\n    if (!textEl.value) return;\n    const { voice } = state.get();\n    if (!voice) return;\n    speak(voice, textEl.value);\n  };\n  const handleInitButtonClick = () => {\n    renderVoiceOptions({ onSelect: handleVoiceSelect, initial: 0 });\n  };\n\n  document.getElementById(\"speak-btn\").onclick = () => handleSpeakButtonClick();\n  document.getElementById(\"init-btn\").onclick = () => handleInitButtonClick();\n})();\n\nfunction speak(voice, text) {\n  console.log(\"speak\", { text, voice });\n  synth.cancel();\n  const utterance = new SpeechSynthesisUtterance(text);\n  utterance.voice = voice;\n  synth.speak(utterance);\n}\n\nfunction renderVoiceOptions({ onSelect, initial }) {\n  const voices = synth.getVoices();\n  const options = voices.map((voice, i) => ({ text: voice.name, value: i }));\n\n  const selectEl = document.getElementById(\"voices\");\n\n  setSelectOptions(selectEl, options);\n\n  selectEl.onchange = (e) => {\n    onSelect(voices[e.target[\"value\"]]);\n  };\n\n  if (initial) {\n    onSelect(voices[initial]);\n  }\n}\n\nfunction setSelectOptions(selectEl, options) {\n  options.forEach((option) => {\n    const optionEl = document.createElement(\"option\");\n    optionEl.value = option.value;\n    optionEl.text = option.text;\n    selectEl.appendChild(optionEl);\n  });\n}\n"]}
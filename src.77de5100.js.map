{"version":3,"sources":["logger.ts","index.ts"],"names":[],"mappings":"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","file":"src.77de5100.js","sourceRoot":"../src","sourcesContent":["export const Logger = ({ logLevel }) => {\n  return {\n    debug: (context, ...msg) => {\n      if (logLevel.includes(\"debug\")) console.log(`[${context}]`, ...msg);\n    },\n  };\n};\n","import { Logger } from \"./logger\";\nconst synth = window.speechSynthesis;\n\nconst getLogLevel = () => {\n  const debugMode = localStorage.getItem(\"debug\");\n  if (debugMode || process.env.NODE_ENV === \"development\") {\n    return [\"debug\"];\n  }\n  return [];\n};\n\nconst logger = Logger({ logLevel: getLogLevel() });\n\nconst State = (initalState = {}) => {\n  let state = initalState;\n  return {\n    set: (update) => {\n      state = { ...state, ...update };\n      return state;\n    },\n    get: (): any => state,\n  };\n};\n\n(() => {\n  const state = State();\n\n  const handleVoiceSelect = (voice) => {\n    logger.debug(\"voice selected\", voice);\n    state.set({ voice });\n  };\n\n  const handleSpeakButtonClick = () => {\n    const textEl = document.getElementById(\"text\") as any;\n    if (!textEl.value) return;\n    const { voice } = state.get();\n    if (!voice) return;\n    speak(voice, textEl.value);\n  };\n\n  const handleError = (err) => {\n    renderErrorMessage(err.message);\n    renderErrorMessage(\"try this app in chrome\");\n  };\n\n  document.getElementById(\"speak-btn\").onclick = () => handleSpeakButtonClick();\n\n  setTimeout(() => {\n    logger.debug(\"voice options\", \"render start\");\n    renderVoiceOptions({\n      onSelect: handleVoiceSelect,\n      onError: handleError,\n      initial: 0,\n    });\n  }, 10);\n})();\n\nfunction speak(voice, text) {\n  logger.debug(\"speak\", { text, voice });\n  synth.cancel();\n  const utterance = new SpeechSynthesisUtterance(text);\n  utterance.voice = voice;\n  synth.speak(utterance);\n}\n\nfunction renderVoiceOptions({ onSelect, onError, initial }) {\n  const voices = synth.getVoices();\n  if (!voices.length) {\n    return onError({ message: \"no voices available\" });\n  }\n  const options = voices.map((voice, i) => ({ text: voice.name, value: i }));\n\n  const selectEl = document.getElementById(\"voices\");\n\n  setSelectOptions(selectEl, options);\n\n  selectEl.onchange = (e) => {\n    onSelect(voices[e.target[\"value\"]]);\n  };\n\n  if (initial !== undefined) {\n    logger.debug(\"initial voice\", voices[initial]);\n    onSelect(voices[initial]);\n  }\n}\n\nfunction setSelectOptions(selectEl, options) {\n  options.forEach((option) => {\n    const optionEl = document.createElement(\"option\");\n    optionEl.value = option.value;\n    optionEl.text = option.text;\n    selectEl.appendChild(optionEl);\n  });\n}\n\nfunction renderErrorMessage(message) {\n  alert(message);\n}\n"]}